# config/packages/monolog.yaml
monolog:
  channels: ['mailer']  # canal dédié (optionnel)

  handlers:
    main:
      type: stream
      path: '%kernel.logs_dir%/%kernel.environment%.log'
      level: debug
      channels: ['!event']

    console:
      type: console
      process_psr_3_messages: false
      channels: ['!event', '!doctrine', '!console']

    # Dépréciations (optionnel mais conseillé en dev)
    deprecation:
      type: stream
      path: '%kernel.logs_dir%/%kernel.environment%.deprecations.log'
    deprecation_filter:
      type: filter
      handler: deprecation
      max_level: info
      channels: ['php']

    # Log dédié pour le mailer (pratique pour ton cas)
    mailer:
      type: stream
      path: '%kernel.logs_dir%/mailer.log'
      level: debug
      channels: ['mailer']
